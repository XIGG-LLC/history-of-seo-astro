---
import BaseLayout from '../../layouts/BaseLayout.astro';
import ActionButton from '../../components/ActionButton.astro';
import { getCollection } from 'astro:content';

const data = (await getCollection('interviews'))
    .sort((a, b) => a.data.sortOrder.valueOf() - b.data.sortOrder.valueOf()); 

const interviewNames = data.map(d => d.data.title);

const propsObj = {
	title: 'The SEO Interviews â€“ People in the History of Search Engine Optimization',
    description: 'The SEO Interviews indexes historic profiles involved in the dawning of the Search Engine Optimization industry.',
    keywords: `Search Engine Optimization Interviews, SEO Interviews, ${interviewNames.join(', ')}`,
    breadBrumbPaths: [{name: 'The Interviews', path: 'seo-interviews/'}]
}
---
<BaseLayout setup={propsObj}>
    <style>
        .interview-item {
            border-bottom: solid 1px #ddd;
            margin-block: 1rem;
            padding-block: 1rem;
        }
        @media only screen and (min-width: 920px) {
            .interview-item {
                display: grid;
                grid-template-columns: 1fr 3fr 1fr;
                gap: 1rem;
            }
        }
    </style>
    {data && data.map(item => (
        <article class="interview-item">
            <header>
                <h2><a href={`/seo-interviews/${item.id}/interview/`}>{item.data.title}</a></h2>
            </header>
            <div class="description" set:html={item.data.description}></div>
            <div class="links">
                <ActionButton 
                    link={`/seo-interviews/${item.id}/`}
                    extraCss="m-block-end-2"
                    ariaLabel={`Summary of the interview with ${item.data.title}`}
                    altText="Read the interview summary">summary</ActionButton>
                <ActionButton 
                    link={`/seo-interviews/${item.id}/interview/`}
                    extraCss="m-block-end-2"
                    ariaLabel={`Full interview with ${item.data.title}`}
                    altText="Read the entire interview">interview</ActionButton>
            </div>
        </article>
    ))}
</BaseLayout>
	