---
import ActionButton from '../components/ActionButton.astro';
import InterviewThumbnail from '../components/InterviewThumbnail.astro';

let data = await Astro.glob('../data/interviews/*.mdx');

// Sort by 'sortorder' field
if (data.length) {
    data = data.filter(d => d.frontmatter.featuredsort !== 0).sort((a, b) => {
        return (a.frontmatter.featuredsort < b.frontmatter.featuredsort) ? -1 : 1;
    });
}
---
<style lang="scss">
    .homeProfile {
        margin-block: 1rem;
        padding-block: 1rem;
        border-bottom: solid 1px #ddd;
        &:last-of-type {
            border: 0;
        }
    }
    @media only screen and (min-width: 992px) {
        .homeProfile {
            display: flex;
            gap: 1rem;
        }
    }
</style>
{data && data.map(profile => (
    
    <div class="homeProfile">
        <InterviewThumbnail src={profile.frontmatter.thumbnail} />
        <div>
            <h3><a href={`/seo-interviews/${profile.frontmatter.slug}/`}>{profile.frontmatter.title}</a></h3>
            <Fragment set:html={profile.frontmatter.featureddescription}></Fragment>
        
            <div>
                <ActionButton 
                    link={`/seo-interviews/${profile.frontmatter.slug}/`}
                    extraCss="mb-2"
                    altText="Read the summary">summary</ActionButton>

                <ActionButton 
                    link={`/seo-interviews/${profile.frontmatter.slug}/interview/`}
                    extraCss="mb-2"
                    altText="Read the entire interview">interview</ActionButton>
            </div>
        </div>
    </div>
))}
